## 引入  
### 电路  
微分方程  

- 电阻：$i=\frac{u}{t}$
- 电容：$i_{c}=c\frac{du_{c}}{dt}$
- 电感：$U_{i}=L\frac{di_{i}}{dt}$
- 理想运算放大器的虚短虚断：![如图](png/Pasted%20image%2020250707113840.png)
### 力与运动  

$$
\Sigma F=ma
$$

$$
F_{粘性摩擦力}=fv
$$

- 前面的是系数，后面的为速度（两个的相对速度）

> [!tip] 笔记  
> 还有就是力矩=转动惯量乘以角加速度  
- $T_{粘性摩擦力力矩}=k\omega$
- 前面是系数，后面是角速度
### 拉氏变换  
公式：$\boxed{L(f^{\prime\prime\prime}(t))=s^{3}F(s)}+s^{2}f(s)+sf'(\omega)+s^2f''(\omega)$  
以此类推，前面是二阶的时候
## 控制系统  
### 开环控制系统和闭环控制系统的区别  
> [!tip] 什么是自动控制  
> 在没有人直接参与的情况下，利用外加的设备或者是装置，使得及其、设备或生产过程的某个工作状态或者是参数自动按照预定的规律运行  

#### 两种基本的控制方式  
- 开环控制：
```mermaid
flowchart LR
A[输入信号（期望值）] --> B[控制器]
 B --> C[执行器] 
 C --> D[被控对象] 
 D --> E[输出信号（实际值）]
```

**特点：**  

- 控制器和被控对象之间只有正向的控制作用
- 输入和输出之间，没有反馈回路

!!! Tip "优缺点比较"  
    - 开环结构简单，闭环的结构复杂  
    - 没有抗干扰能力，闭环是有的  
    - 为了得到期望的输出结果需要不断校准

---
- 闭环控制
    - ![](png/Pasted%20image%2020250708171141.png)
    - 通过反馈回路使得系统构成闭环并按**偏差性质**进行控制作用，减小或者消除偏差的控制系统
    -  控制器中接收到的信号为 $e(t)$（偏差信号），为输入信号和反馈信号的差值之类的

!!! Tip "组成部分的解释"  
    - 控制器：  
        称为控制环节，接收**偏差信号**，通过转换或运算产生**控制量**$u(t)$  
    - 被控对象：  
        接收控制量并输出被控制变量  
    - 反馈环节  
        将输出转换为主反馈信号的装置  
    - 比较环节：  
        相当于**偏差检测器**，输出量等于两个输入量的代数和，箭头上的符号表示相加或者是相减

> [!tip]  
> 自动控制的基础是**闭环控制**  
> 控制的目的是为了减小或消除误差  
> 闭环系统是有抗干扰能力的，不需要进行实时的校准  
> 所以**闭环更重要**  
> 开环只有正向的控制作用，没有反向的联系
### 自动控制系统的类型  
- 分类：
    - 是否形成回路（或者叫控制方式）：**开环和闭环**
    - 系统元件的特性（输入和输出之间元件是否满足线性关系）：**线性和非线性**
    - 传递信号的形式：**连续和离散**
    - 按照系统的输出是否随着输入作用的**时刻**变化而变化分为：**时变控制系统和时不变（定常）**  
**重点在于线性和时变的判断**  
> [!tip] 特点  
> 非线性方程的特点是方程中含有变量（输入输出的项）及导数的高次幂或者是乘积项  
> 时变主要看方程的**系数**是否和时间有关  

!!! Tip "例题"  
    系统的微分方程为 $t\frac{dc(t)}{dt}+c(t)=r(t)+3\frac{dr(t)}{dt}$，该系统属于  
    
    - 没有交叉项和高密次项（其中的 $c(t)$ 为输出的信号，另一个是输入的信号，交叉项表示两者的乘积）
    - 系数和时间有关        
    所以是线性的，时变的
> [!warning]  
> 有常数也是非线性的  

### 自动控制系统的术语和定义  
!!! Tip "常用的术语和定义如下"  
    - ![环节](png/Pasted%20image%2020250708175603.png)  
    - 所有的**箭头代表的都是信号**  
        - 输入信号 r：参考输入，给定量或是给定值  
        - 反馈信号 b：系统输出端取出并**反向送回**系统（或元件）输入端的信号  
        - 输出信号 c：又称**被控量**，是被控对象中要求按照一定规律变化的物理量，与输入量之间保持一定的函数关系  
        - 控制信号 u：操纵量，是控制环节的输出，作用于**被控对象的信号**  
        - 扰动信号 n：与控制作用相反，是一种**不希望的**、影响系统输出的不利信号（可能来自于系统的外部或者是内部）  
        - 误差信号 e：输入和反馈信号的差值 (error)，其中的圆圈为**比较点**  
    - **引出点**：为输出那里引出的点  
    - 上述为自动控制系统的方框图（表征控制系统结构、环节的图）  

### 自动控制系统的基本要求  

> [!tip] 三个要求  
> 稳定性  
> 快速性  
> 准确性  

#### 稳定性  
> [!tip] 性质  
> 在扰动的情况下不会发散  
> 由系统的结构和参数决定，与外界的因素无关  
> 稳定性**是最重要的**

#### 准确性  
> [!tip]  
> 与设定值的偏差小  
> 衡量控制系统的精度的重要指标

#### 快速性  
> [!tip]  
> 用最少的时间达到要求  
> 对过渡过程的形式和快速提出要求，一般称为动态的性能
### 拉氏变换的定义以及性质  
**定义：**
  
- 时域函数 $f(t)$ 的拉氏变换 $F(s)$ 用一下进行定义：$L[f(t)]=F(s)=\int_0^\infty f(t)\cdot e^{-st}dt$

> [!tip] 解释  
> 其中的 s 为复数域上定义的  

- 典型函数的拉氏变换（几种重要的拉氏变换）好像就是随机过程的

$$
\boxed{\begin{array}{cc}f(t)&F(s)\\\\\delta(t)&1\\\\1(t)&1/s\\\\t&1/s^2\\\\e^{-at}&1/(s+a)\\\\\sin\omega t&\omega/(s^2+\omega^2)\\\\\sin\omega t&\omega/(s^2+\omega^2)\end{array}}
$$

!!! Tip "基本性质"  
    - 线性性质：$L[af_1(t)+bf_2(t)]=aL[f_1(t)]+bL[f_2(t)]$    
    - 微分性质：若 $L[f(t)=F(s)]$（就是从 t 到 $\delta$ 对时域函数是在不断求导的）  
    - 中值定理：$\operatorname*{lim}_{t\to\infty}f(t)=\operatorname*{lim}_{s\to0}sF(s)$  

> [!tip] 拉氏反变换
> 1. 裂项  （实际上就是使用微积分中的方法，将分式变为分子不含变量的）
> 2. 查表：反带（是有线性性质的）  
> ![方法](png/Pasted%20image%2020250711213850.png)

**上面是必备的知识点**  
## 控制系统的数学模型  
### 自控中的两种数学模型  
#### 微分方程模型  
- 线性联系的控制系统：使用线性微分方程描述：

$$
\begin{gathered}a_0\frac{d^n}{dt^n}c(t)+a_1\frac{d^{n-1}}{dt^{n-1}}c(t)+...a_{n-1}\frac{d}{dt}c(t)+a_nc(t)\\=b_0\frac{d^m}{dt^m}r(t)+b_1\frac{d^{m-1}}{dt^{m-1}}r(t)+...b_{m-1}\frac{d}{dt}r(t)+b_mr(t)\end{gathered}
$$

其中的 $c(t)$ 为输出量；$r(t)$ 为系统的输入量  
> [!info] t 域的微分  
> 上面是微分方程模型  
> 是建立在 t 域上的，找出**输入和输出**之间的关系  

#### 使用传递函数的数学模型 
**定义**：线性定常系统的传递函数是指，在**零初始条件**下（输入和输出信号在零时刻的值为 0），系统输出信号拉氏变换和输入信号拉式变换的比值，$G(s)=\frac{C(s)}{R(s)}$。  
> [!info] 关键词  
> 线性定常、零初始、输入输出拉氏变换的比  

- 传递函数的一般形式：$G(s)=\frac{C(s)}{R(s)}=\frac{b_0s^m+b_1s^{m-1}+\cdots+b_{m-1}s+b_m}{a_0s^n+a_1s^{n-1}+\cdots+a_{n-1}s+a_n}$
- 只关心系统的输入和输出

!!! Tip "传递函数性质"    
    - 只适用于线性定常系统  
    - 完全由系统结构和参数决定，与输入信号无关  
    - 在零初始状态下得到

---
![图像](png/Pasted%20image%2020250714171403.png)  

- **几种传递函数**
    - 开环传递函数：将输入端对应比较器输出 $E(s)$ 到反馈信号 $B(s)$ 之间的**所有传递函数的乘积**，记为 $G_k (s)$，公式为 $G_K(s)=G(s)H(s)$
    - 闭环：输出与输入之间的比得到的传递函数：（因为闭环是有返回来的函数的）

    $$
        G(s)=\frac{C(s)}{R(s)}=\frac{G(s)}{1+G(s)H(s)}
    $$

    - 误差传递函数：误差信号 $E(s)$ 和输入信号 $R(s)$ 之间的比为 $\frac{E(s)}{R(s)}:$

> [!example] 怎么转化  
> 使用拉氏变换建立两个方程之间的关系  
> 例：微分方程：$\frac{d^{2}c(t)}{dt^{2}}+3\frac{dc(t)}{dt}+2c(t)=2r(t)$  
>   
> 解：使用拉氏变换的微分性质，二阶导的拉氏变换，有这样的公式：$L[\frac{f(t)}{d t^{2}}]=s^{2}F(s)-sf(0)-f^{\prime}(0)$  
> 对等式的左右两边进行拉式变换，之后将初始值为 0 带入，再带入传递函数的公式
> 

### 典型环节的传函函数  
- 什么叫做典型环节  
    不同的物理系统研究其运动规律和数学模型的共性可以划分成为数不多的几种**典型的数学模型**，称为典型环节（相当于**组成的基本单元**）

|   比例   |                        $G(s)=K$                        |
| :----: | :----------------------------------------------------: |
|   积分   |                   $G(s)=\frac{1}{s}$                   |
|   微分   |                        $G(s)=s$                        |
| 一阶惯性环节 |                 $G(s)=\frac{1}{Ts+1}$                  |
| 一阶微分环节 |                    $G(s)=\tau s+1$                     |
| 二阶震荡环节 | $G(s)=\frac{\omega_n^2}{s^2+2\xi\omega_ns+\omega_n^2}$ |

其中的 $\omega_n$ 为常数  
### 信号流图的绘制  
> [!tip] 方框图  
> ![图](png/Pasted%20image%2020250714212859.png)  
> 信号用箭头来表示  
> 信号之间的关系使用方框表示，方框中的是传递函数，信号是乘以传递函数的  
> 图中还有+-符号，表示两个信号的加减关系  

> [!tip] 信号流图  
> ![图](png/Pasted%20image%2020250714213151.png)  
> 其中的点表示节点  
> 给出的一般是方框图，要将其转化为信号流图  

!!! Tip "做题的套路"    
- 把握方框图和信号流图的关系  
    方框图中信号之间的关系是使用**方框图**来表示的，信号流图是使用在箭头的上面写函数关系表示
- 表示：
    - 将从左到右输入到输出的主干道上用**箭头**表示的**信号**使用**圆圈 (节点)** 表示
    - 信号之间的关系改为使用**箭头**表示（支路）（直接移动过去的话是 1）
    - 补画从右往左的回路
- 实际上，节点的数量不是那么重要，一般以运算节点分割即可
### 求解系统的传递函数——梅森增益公式  
> [!example] 求解闭环的传递函数  
> ![所示](png/Pasted%20image%2020250723120440.png)  
> 求输入和输出之间的传递函数

!!! Tip "求解的步骤"    
    - 数出系统中**所有的回路（L 形成环的）**：用增益表示这些回路，由回路写出系统的特征式  
        - 上述的为 $L_{1}=-G_{1}(s)H_{1}(s)L_{2}=-G_{2}(s)H_{2}(s)L_{3}=-G_{3}(s)H_{3}(s)$  
        - 找出两两互不接触的环，如图中的 $L_1和L_3$，将两个相乘，$L_1L_3=G_1(s)H_1(s)G_3(s)H_3(s)$  
        - 计算出 $\Delta$：$\Delta=1-\sum_{i=1}^{3}L_{i}+L_{1}L_{3}=1+G_{1}(s)H_{1}(s)+G_{2}(s)H_{2}(s)+G_{3}(s)H_{3}(s)G_{1}(s)H_{1}(s)G_{3}(s)H_{3}(s)$  
    - 数出系统中所有的**前向通路（P）**，用增益表示这些前向通路，并确定其余因子，计算 $P_k和\Delta_k$  
        - 前者为从输出节点到输入节点的第 k 条前向通路的总增益（传递函数的乘积）  
        - 后者为第 k 条前向通路对的余子式，公式同 $\Delta$，但是针对回路集合不同（针对的是与**所要求的前向通路互不接触的回路**，对符合条件的回路带入之前的公式，所以一定是比之前的少的）（这道题中都是接触的，所以值为 1，**没有符合条件的**）  
    - 用梅森公式写出传递函数  

    $$  
    G(s)=\frac{C(s)}{R(s)}=\frac{P_1\Delta_1}{\Delta}=\frac{G_1(s)G_2(s)G_3(s)}{\Delta}  
    $$

### 求解系统的传递函数-进阶版  
!!! Tip "做题套路"  
    - 数出所有的回路（L），回路中不能有重复的部分：用增益表示，找的方法是从后往前找一下，必须是**顺着箭头找的**（因为复杂的系统的换成一个回路的不一定都是沿着一个方向的），而且单个回路必须没有重复的部分  
        - 数出所有的两两互不接触的回路  
        - 写出特征式 $\Delta$：1-单回路的特征式+两两不接触的特征式的乘积  
    - 数出所有的前向通路（P），用增益表示这些**前向通路**（是沿着箭头，由输入走向输出的通路），并确定**其余因子**（由于现在复杂的系统的前向通路可能有很多，余因子可能不是 1），确定对应的 P 和 K（有多个）  
    - 使用梅森公式写出传递函数  

    $$  
        \frac{C(s)}{R(s)}=\frac{P_{1}\Delta_{1}+P_{2}\Delta_{2}}{\Delta}=\frac{G_{1}G_{2}G_{3}-G_{4}G_{3}(1+G_{1}G_{2}H_{1})}{1+G_{1}G_{2}H_{1}+G_{3}H_{2}+G_{2}H_{3}+G_{1}G_{2}G_{3}H_{1}H_{2}}  
    $$
  
    图像为  
    ![图像](png/Pasted%20image%2020250724150153.png)  

#### 其他的题目  
> [!question] 要点  
> 首先是找回路的时候要**从后往前**，看节点  
> 之后用找出来的回路，计算 $\Delta$  
> 数出所有的前向通路（当求解 $\frac{E(s)}{R(s)}$ 时，**前向通路为从 R 到 E 的通路**  
> 套公式，计算其余因子，带入公式中计算传递函数  

上述题目的图像为  
![题目](png/Pasted%20image%2020250724151211.png)  

---
重点在于确定余因子  
还有可能求**误差传递函数**  

### 困难版的梅森增益公式  
题目如下：  
![题目](png/Pasted%20image%2020250724151921.png)  

1. 所有的回路，使用增益来表示（乘积）（从后往前找反馈点）
    1. 找出两两互不接触的回路，带入计算公式
2. 找出前向通路（也是不能重合的），必须确定前向通路的起始点
    1. 表示这些前向通路，计算确定其余因子
    2. 一一对应
3. 带入梅森公式进行计算

$$
\frac{Y(s)}{N(s)}=\frac{G_3G_4\left(1+G_1G_2H_1\right)-G_3G_3H_2}{1+G_1G_2H_1+G_2G_3H_2+G_1G_2G_3G_4H_3+G_1G_5H_3}
$$

输出不受某一信号的干扰，让这个传递函数为 0，即分子为 0  
### 求解系统的传递函数-结构图等效化简  
这个是求解传递函数的另一种方法，虽然没有上面的梅森公式常用
#### 预备知识  
1. 串联：相当于电路系统中的串联（传递函数为两个的乘积）（$G(s)=G_1(s)G_2(s)$）
2. 并联：相当于电路的并联（传递函数为两个函数的和或差）（$G(s)=G_1(s)-G_2(s)$）
3. 反馈：相当于回去，也就是闭环控制系统的组成成分（$G(s)=\frac{G(s)}{1+G(s)H(s)}$）

**实现如下的简化**  
![](png/Pasted%20image%2020250724171924.png)  
**做题的步骤：**  
1. 合并框图中可以合并简化的部分（优先使用梅森增益公式，简单）
    1. 分部分，拆一下，并联的想加减，串联的相乘
    2. 注意区分并联和反馈（看箭头的方向）
2. 由小到大，带入公式，进行简化

### 上述的进阶结构图  
#### 预备的知识  
1. 取出点前移：
2. 取出点后移
3. 汇合点前移
4. 汇合点后移  
![所示的公式](png/Pasted%20image%2020250724173902.png)  

> [!tip] 总结  
> 引出点前移（乘跨过方框的值），后移相反，（除以跨过的方框的值）  
> 比较点前移（除以跨过的方框的值），后移相反  

!!! Tip "做题的步骤"  
    - 先合并可以简化的部分（串并联、反馈）  
        - 但是，中间有着比较点或者是引出点时，就不是串并联反馈了，所以需要前后移动  
    - 所以移动  
        - 必须向**同类移动**  
        - 将所有的比较点和引出点标出来，向**同类移动**，且尽量不要跨太多移动  
    - 移动后，进一步进行化简

![所示](png/Pasted%20image%2020250724174724.png)  

### 电路系统的建模  
**建立电路系统的传递函数**$\frac{U_0(s)}{U_i(s)}$  
图像如图所示：  
  ![](png/Pasted%20image%2020250724221600.png)  
本质上还是求出传递函数，使用的方法**复阻抗法**  

$$
\text{电容的复阻抗:}\frac{1}{Cs} \\ \text{电感的复阻抗:}Ls
$$

其中的 s 为复数域上的，为 $j\omega$  
同时结合一下复阻抗的概念  
所以，最后由复阻抗法就可以得出  

$$
G(s)=\frac{U_0(s)}{U_i(s)}=\frac{R_2}{R_2+(R_1/\frac{1}{Cs})}=\frac{R_1R_2Cs+R_2}{R_1R_2Cs+R_1+R_2}
$$

## 线性系统的时域分析  
### 基本概念和典型测试信号  
**时域分析：**  
典型的测试信号下，系统的时域响应的动态性能和稳态性能分析  
**典型测试信号：**  

|   名称    |      时域表达式      |          复域表达式           |
| :-----: | :-------------: | :----------------------: |
| 单位阶跃函数  |  $1 (t)，t>=0$   |          $1/s$           |
| 单位斜坡函数  |       $t$       |         $1/s^2$          |
| 单位加速度函数 |     $t^2/2$     |         $1/s^3$          |
| 单位脉冲函数  | $\delta(t),t=0$ |            1             |
|  正弦函数   | $Asin\omega t$  | $A\omega/(s^2+\omega^2)$ |

**动态过程和稳态过程**  
    系统的时间响应，由**动态过程和稳态过程**两部分组成  

- 动态过程：输入之后，还在波动的过程（又称为过渡过程、瞬态过程）
- 稳态过程：经过一段时间之后，基本上稳定的过程，输出量的表现形式，又称为稳态响应

![](png/Pasted%20image%2020250724232802.png)  

#### 动态性能的指标  
峰值时间 $t_p$：响应超过其终值达到第一个峰值所需要的时间  
调节时间 $t_s$：响应到达并保持在终值 $+-5（或者是2）\%$ 的所需的时间，之后的基本上就是稳态了  
超调量 $\sigma \%$：相应的最大偏移量和终值之差的百分比  (公式如下)

$$
\boldsymbol{\sigma}\%=\frac{\boldsymbol{c}(\boldsymbol{t}_p)-\boldsymbol{c}(\infty)}{\boldsymbol{c}(\infty)}\times\boldsymbol{100}\%
$$

![](png/Pasted%20image%2020250724233821.png)  

#### 稳态性能指标  
稳态误差：稳定之后的误差  
> [!tip] 例  
> 时域分析中最常用的典型输入信号为阶跃函数信号（单位信号的输入）  
> 时域中的所有性能指标都是在阶跃作用下定义的

### 时域响应的求解  
时域响应的求解：求解某个输入时的，系统的输出的响应（**没有初始条件**下的做法）  
> [!tip] 求解方法  
> 先将时域的输入变为复数域的，再乘以传递函数，之后进行拉式反变换

还有一种解题的方法：将传递函数转换为微分方程的形式（适用于**有初始条件**下的做法）  
> [!tip] 方法  
> 将传递函数乘出来，将 s 作为微分算子  
> 对等式的左右进行拉氏变换, 使用那个微分拉氏变换的公式  
> 带入初始条件，将 $C(s)与R(s)$ 的关系表示出来  
> 之后对 $C(S)$ 进行拉氏反变换  

### 劳斯判据（稳定性分析）  
**定义：**  
    线性系统稳定的充要条件就是：闭环传递函数的极点（特征方程）都在 s 平面的左半部分  
**判稳的方法：**  
1. 求根（很困难）
2. 劳斯判据
#### 劳斯判据  
1. 描述：若线性系统的特征方程为（特征方程是闭环传递函数的分母或者是开环传递函数的分子加分母）

$$
    a_0s^n+a_1s^{n-1}+\cdots+a_{n-1}s+a_n=0
$$

    则系统的稳定充分必要条件为**方程的系数为正数且对应的劳斯表的第一列元素均为正数**
    若任一系数为 0 (缺项)或负数，则不稳定

> [!tip] 劳斯表  
> 降幂排  
> 填系数  
> 前两行的系数用特征方程的系数填充  
> 下一行的系数取决于上两行的系数阵  
> 为对角相乘相减再除以左下角的（后一列的则前一列不变更，后一列向后推一列）  

之后根据劳斯表的第一列进行分析（有变号，不稳定，在 s 右半平面/正实部）  
变号两次，代表有着**两个正实部的根  （有两个根在右半 s 平面）**  
特征方程为几次就有几个根
### 劳斯判据的特殊情况  
**特殊情况一：**  某一行的第一列的项为 0，而其余的各项不为 0 或者是不全为 0  
此时使用很小的正数来代替 0，例如 $\epsilon$  ，这是一个很小的正数，根据这个系数计算其他的劳斯表中的系数，判断其正负  

**特殊情况二**：出现全为 0 的行时，使用上一行的系数构成一个**辅助方程**，对辅助方程求导，所得的方程的**系数代替全 0 行**，再次使用劳斯判据（特殊的点在于，辅助方程的根就是特征方程根的一部分）  
![这种](png/Pasted%20image%2020250725221831.png)

### 劳斯判据的进阶  
#### 分析系统参数对系统稳定性的影响  
1. 由框图得出传递函数
    1. 闭环传递函数的分母（使用之前的方法求出）
    2. 开环传递函数的分子加分母（这个可能更简单一点）
2. 列出劳斯判据的公式，判断稳定的条件下，K 的取值
#### 确定系统的稳定余量  
例：为了使系统的特征方程的实部不大于-1，确定 K 的取值范围  
> [!tip] 要点  
> 此时的范围更小了  
> 都位于 s=-1 的左边  
> 所以要先进行一个坐标变换，之后再进行劳斯判据

新的稳定边界是 s=-1，则取 s=z-1，边界就变成了 z=0，符合标准的劳斯判据，将 z 带入原来的特征方程公式  
同样带入劳斯判据的公式  

